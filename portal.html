<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SPARK-X | UEAB All Grades & Portal</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    html,body { background:#000; color:#0f0; font-family:monospace; margin:0;padding:0; width:100vw; min-height:100vh;}
    #cmatrix-canvas { 
      position:fixed; z-index:1; top:0; left:0; width:100vw; height:100vh;
      pointer-events:none; opacity:0.11; display:block; background:transparent;
    }
    .portal-content { position:relative; z-index:2; padding:20px; max-width:900px; margin:auto;}
    h1, h2, h3 { text-shadow:0 0 14px #0f0;}
    .brand { font-size:1.2em; font-weight:bold; margin-bottom:6px; letter-spacing:1px;}
    .created-by {
      font-size:1em; color:#fff; background:#109a1080; display: inline-block;
      margin: 0 0 18px 0; padding: 8px 20px; border-radius: 14px; border: 2px solid #0ff;
      font-weight: bold; box-shadow: 0 0 14px #0ff99c88; text-align:center; letter-spacing:2px;
    }
    .footer { text-align:right; color:#0ff; opacity:.7; margin-top:40px; font-size:.97em;}
    .section {margin-top:32px; margin-bottom:12px;}
    .assignments, .tt-table, .grades {width:100%; border-spacing:0; font-size:1em;}
    .assignments th, .tt-table th, .grades th {background:#212; color:#aef;}
    .assignments td, .tt-table td, .grades td {border:1px solid #022; padding:6px;}
    .no-data {color:#f55;}
  </style>
</head>
<body>
<canvas id="cmatrix-canvas"></canvas>
<div class="portal-content">
  <div class="brand">SPARK-X | UEAB Student Portal</div>
  <div class="created-by">Created by Eliakim</div>
  <h2>Welcome!</h2>
  <div>
    <b>How to use real data:</b>
    <ol>
      <li>Run <code>icampus_scraper.py</code> to generate <code>mydata.json</code> (see the repo's README).</li>
      <li>Paste your <code>mydata.json</code> contents inside the <b>data</b> variable in this file, then reload this page.</li>
    </ol>
  </div>
  <div class="section">
    <h3>Assignments Approaching</h3>
    <table class="assignments" id="assignmentsTable">
      <thead><tr><th>Course</th><th>Title</th><th>Due</th><th>Description</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="section">
    <h3>Timetable</h3>
    <table class="tt-table" id="ttTable">
      <thead><tr><th>Course</th><th>Start</th><th>End</th><th>Location</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="section">
    <h3>Grades</h3>
    <table class="grades" id="gradesTable">
      <thead>
        <tr>
          <th>Course Name</th>
          <th>Code</th>
          <th>Group</th>
          <th>Grade</th>
          <th>Credits</th>
          <th>Semester</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="footer">SPARK-X Portal &copy; 2025 | University of Eastern Africa, Baraton</div>
</div>
<script>
// Matrix rain (tiny)
(function matrixEffect() {
  const canvas = document.getElementById("cmatrix-canvas");
  let ctx = canvas.getContext("2d");
  const matrixChars =
    "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz" +
    "的一是在不了有和人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经十三之进等部度家电力里如水化高自三小" +
    "日月山川天地风雨雷电星辰宇宙海洋和平梦想未来光明希望勇气真理自由荣耀爱心";
  const charsArray = matrixChars.split('');
  let fontSize = 9; // tiny
  let columns, drops;
  function resizeMatrix() {
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    columns = Math.floor(canvas.width / fontSize);
    drops = [];
    for (let x = 0; x < columns; x++)
      drops[x] = Math.random() * canvas.height / fontSize;
  }
  window.addEventListener('resize', resizeMatrix);
  resizeMatrix();
  function drawMatrix() {
    ctx.fillStyle = "rgba(0,0,0,0.11)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.font = fontSize + "px monospace";
    for (let i = 0; i < columns; i++) {
      let text = charsArray[Math.floor(Math.random() * charsArray.length)];
      ctx.fillStyle = i % 9 === 0 ? "#0ff" : "#1f1";
      ctx.fillText(text, i * fontSize, drops[i] * fontSize);
      if (drops[i] * fontSize > canvas.height && Math.random() > 0.975)
        drops[i] = 0;
      else
        drops[i] += 1 + Math.random() * 0.8;
    }
    requestAnimationFrame(drawMatrix);
  }
  drawMatrix();
})();

// Paste your exported data below!
const data = {
  "grades": [],
  "timetable": [],
  "assignments": []
  // after running icampus_scraper.py and generating mydata.json,
  // replace this object with the contents of that file!
};

// Fill Assignments
const asg = data.assignments || [];
const asgBody = document.getElementById('assignmentsTable').querySelector('tbody');
asgBody.innerHTML = "";
if (asg.length)
  asg.forEach(a=>{
    asgBody.innerHTML += `<tr>
        <td>${a.course}</td>
        <td>${a.title}</td>
        <td>${a.due}</td>
        <td>${a.desc}</td>
      </tr>`;
  });
else asgBody.innerHTML = `<tr><td colspan="4" class="no-data">No assignments</td></tr>`;

// Fill Timetable
const tt = data.timetable || [];
const ttBody = document.getElementById('ttTable').querySelector('tbody');
ttBody.innerHTML = "";
if (tt.length)
  tt.forEach(c=>{
    ttBody.innerHTML += `<tr>
      <td>${c.course}</td>
      <td>${c.start}</td>
      <td>${c.end}</td>
      <td>${c.location}</td>
    </tr>`;
  });
else ttBody.innerHTML = `<tr><td colspan="4" class="no-data">No timetable data</td></tr>`;

// Fill Grades
const grades = data.grades || [];
const gBody = document.getElementById('gradesTable').querySelector('tbody');
gBody.innerHTML = "";
if (grades.length)
  grades.forEach(row=>{
    gBody.innerHTML += `<tr>
      <td>${row.name}</td>
      <td>${row.code}</td>
      <td>${row.group}</td>
      <td>${row.grade}</td>
      <td>${row.credits}</td>
      <td>${row.semester}</td>
      <td>${row.status}</td>
    </tr>`;
  });
else gBody.innerHTML = `<tr><td colspan="7" class="no-data">No grades data</td></tr>`;
</script>
</body>
</html>
